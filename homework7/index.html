html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <script src="https://d3js.org/d3.v5.js"></script>
    <script src="https://d3js.org/d3-array.v1.min.js"></script>
    <script src="https://d3js.org/d3-collection.v1.min.js"></script>
    <script src="https://d3js.org/d3-color.v1.min.js"></script>
    <script src="https://d3js.org/d3-format.v1.min.js"></script>
    <script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
    <script src="https://d3js.org/d3-time.v1.min.js"></script>
    <script src="https://d3js.org/d3-time-format.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale.v2.min.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet'>
    <link href='https://fonts.googleapis.com/css?family=Tenor Sans' rel='stylesheet'>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <title>Budget Analysis</title>
</head>

<style>
    .dot1 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #1442cc;
    }
    
    .dot2 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #EDAE49;
    }
    
    .dot3 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #FF8C00;
    }
    
    .dot4 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #2E4052;
    }
    
    .dot5 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #D1495B;
    }
    
    .dot6 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #00798C;
    }
    
    .dot7 {
        height: 25px;
        width: 25px;
        border-radius: 50%;
        display: inline-block;
        background-color: #13BDD7;
    }
    
    h1 {
        font-family: 'Quicksand';
        font-size: 40px;
        font-style: normal;
        font-variant: normal;
        font-weight: 600;
        line-height: 50px;
        color: white;
    }
    
    h3 {
        font-family: 'Quicksand';
        font-size: 30px;
        font-style: normal;
        font-variant: normal;
        font-weight: 200;
        line-height: 15.4px;
        color: rgba(54, 54, 54, 0.863);
    }
    
    h4 {
        font-family: 'Quicksand';
        font-size: 25px;
        font-style: normal;
        font-variant: normal;
        font-weight: 500;
        line-height: 26.4px;
        color: white;
    }
    
    p {
        font-family: 'Quicksand';
        font-size: 18px;
        font-style: normal;
        font-variant: normal;
        font-weight: 200;
        line-height: 20px;
        color: dimgrey;
    }
    
    h5 {
        font-family: 'Quicksand';
        font-size: 10px;
        font-style: normal;
        font-variant: normal;
        font-weight: 200;
        line-height: 20px;
    }
    
    svg {
        width: 800px;
        height: 670px;
    }
    
    path {
        fill: none;
        stroke: #aaa;
    }
    
    #header {
        background-color: rgba(114, 113, 113, 0.445);
        padding: 20px;
    }
    
    body {
        background-color: hsla(0, 0%, 87%, 0.034);
        background-repeat: repeat;
    }
</style>

<body>
    <div id="header">
        <center>
            <div class='row'>
                <div class='col-md-5'>
                    <p>&nbsp;</p>
                    <h1 class="animated fadeInDown">// Budget Analysis // </h1>
                    <p>&nbsp;</p>
                </div>
                <div class='col-md-7'>
                    <p>&nbsp;</p>
                    <h4 class="animated fadeInDown" align='left'>| TOTAL PUBLIC EXPENDITURE BY POLICY AREA GROUP</h3>
                        <br>
                        <p class="animated fadeInDown" align='left'>The government usually divides public expenditure into 7 groups, which are “Health”, “Social Welfare”, “Health”, “Security”, “Infrastructure”, “Environment and Food”, “Economic”, “Housing” and “Others”.
                        </p>
                        <p class="animated fadeInDown" align='left'>The chart reflects the estimated and actual total expenditure by policy area from 2010 to 2016.
                        </p>
                        <p>&nbsp;</p>
                </div>
            </div>
        </center>
    </div>
    <p>&nbsp;</p>
    <div class="container">
        <center>
            <br>
            <br>
            <div class='row'>
                <div class='col-md-7'>
                    <br>
                    <br>
                    <br>
                    <p align="center"> <span class="dot1"></span> 2016
                        <span class="dot2"></span> 2015
                        <span class="dot3"></span> 2014
                        <span class="dot4"></span> 2013
                        <span class="dot5"></span> 2012
                        <span class="dot6"></span> 2011
                        <span class="dot7"></span> 2010</p>
                    <p> x-axis= Actual $B | y-axis= Estimated $B</p>
                    <svg>
                <path transform="translate(200, 0)"></path>
                </svg>
                    <script>
                        var data = [
                            [340, 30],
                            [-150, 540],
                        ];
                        var lineGenerator = d3.line();
                        var pathString = lineGenerator(data);
                        d3.select('path')
                            .attr('d', pathString);
                        var x = d3.scaleLinear()
                            .domain([0, 100]) //range of ur raw data (input)
                            .range([10, 500]); // range of svg coordinate (output) //spread it bigger after chang suv in width
                        var y = d3.scaleLinear()
                            .domain([0, 100]) //range of ur raw data (input)
                            .range([500, 0]); // range of svg coordinate (output) //spread it bigger
                        var xAxis = d3.axisBottom().scale(x); //Axis place // [.ticks(5)] how many scale
                        var yAxis = d3.axisLeft().scale(y);
                        var svg = d3.select("svg").append("g").attr("transform", "translate(40, 40)"); //margin
                        svg.append('g')
                            .attr('transform', 'translate(0,500)')
                            .call(xAxis);
                        svg.append('g')
                            .attr('transform', 'translate(10,0)') // axis coordinates
                            .call(yAxis);
                        var dataset = [
                            ['Education', [{
                                'colour': '#1442cc',
                                'height': 82.4,
                                'weight': 84.0,
                            }, {
                                'colour': '#EDAE49',
                                'height': 79,
                                'weight': 79.3,
                            }, {
                                'colour': '#FF8C00',
                                'height': 73.7,
                                'weight': 75.3,
                            }, {
                                'colour': '#2E4052',
                                'height': 76.4,
                                'weight': 76.9,
                            }, {
                                'colour': '#D1495B',
                                'height': 76.6,
                                'weight': 79.1,
                            }, {
                                'colour': '#00798C',
                                'height': 67.9,
                                'weight': 68.7,
                            }, {
                                'colour': '#13BDD7',
                                'height': 60.7,
                                'weight': 63.7,
                            }, ]],
                            ['Social Welfare', [{
                                'colour': '#1442cc',
                                'height': 68.2,
                                'weight': 72.4,
                            }, {
                                'colour': '#EDAE49',
                                'height': 64.5,
                                'weight': 67.7,
                            }, {
                                'colour': '#FF8C00',
                                'height': 58.1,
                                'weight': 61.9,
                            }, {
                                'colour': '#2E4052',
                                'height': 55.4,
                                'weight': 61.2,
                            }, {
                                'colour': '#D1495B',
                                'height': 45.9,
                                'weight': 48.4,
                            }, {
                                'colour': '#00798C',
                                'height': 43.3,
                                'weight': 46,
                            }, {
                                'colour': '#13BDD7',
                                'height': 40.5,
                                'weight': 43.5,
                            }, ]],
                            ['Health', [{
                                'colour': '#1442cc',
                                'height': 66.4,
                                'weight': 77.6,
                            }, {
                                'colour': '#EDAE49',
                                'height': 70.4,
                                'weight': 70.6,
                            }, {
                                'colour': '#FF8C00',
                                'height': 57.5,
                                'weight': 56.7,
                            }, {
                                'colour': '#2E4052',
                                'height': 67.6,
                                'weight': 53.7,
                            }, {
                                'colour': '#D1495B',
                                'height': 59.6,
                                'weight': 59.2,
                            }, {
                                'colour': '#00798C',
                                'height': 45.3,
                                'weight': 45.2,
                            }, {
                                'colour': '#13BDD7',
                                'height': 39.9,
                                'weight': 40.5,
                            }, ]],
                            ['Infrastructure', [{
                                'colour': '#1442cc',
                                'height': 89.2,
                                'weight': 86.1,
                            }, {
                                'colour': '#EDAE49',
                                'height': 81.0,
                                'weight': 76.3,
                            }, {
                                'colour': '#FF8C00',
                                'height': 74.1,
                                'weight': 78.1,
                            }, {
                                'colour': '#2E4052',
                                'height': 73.7,
                                'weight': 76.1,
                            }, {
                                'colour': '#D1495B',
                                'height': 61.7,
                                'weight': 62.3,
                            }, {
                                'colour': '#00798C',
                                'height': 52.5,
                                'weight': 54.6,
                            }, {
                                'colour': '#13BDD7',
                                'height': 49,
                                'weight': 49.7,
                            }, ]],
                            ['Economic', [{
                                'colour': '#1442cc',
                                'height': 25.2,
                                'weight': 35.3,
                            }, {
                                'colour': '#EDAE49',
                                'height': 19.0,
                                'weight': 22,
                            }, {
                                'colour': '#FF8C00',
                                'height': 20.5,
                                'weight': 21.4,
                            }, {
                                'colour': '#2E4052',
                                'height': 37.3,
                                'weight': 40.1,
                            }, {
                                'colour': '#D1495B',
                                'height': 33.3,
                                'weight': 38,
                            }, {
                                'colour': '#00798C',
                                'height': 47.2,
                                'weight': 46,
                            }, {
                                'colour': '#13BDD7',
                                'height': 17.4,
                                'weight': 14.9,
                            }, ]],
                            ['Housing', [{
                                'colour': '#1442cc',
                                'height': 0.4,
                                'weight': 34.5,
                            }, {
                                'colour': '#EDAE49',
                                'height': 29.4,
                                'weight': 29.8,
                            }, {
                                'colour': '#FF8C00',
                                'height': 24.3,
                                'weight': 25.3,
                            }, {
                                'colour': '#2E4052',
                                'height': 21.3,
                                'weight': 24.5,
                            }, {
                                'colour': '#D1495B',
                                'height': 20.5,
                                'weight': 21.7,
                            }, {
                                'colour': '#00798C',
                                'height': 18.9,
                                'weight': 19.7,
                            }, {
                                'colour': '#13BDD7',
                                'height': 17,
                                'weight': 2,
                            }, ]],
                            ['Envrionment and Food', [{
                                'colour': '#1442cc',
                                'height': 20.8,
                                'weight': 21.9,
                            }, {
                                'colour': '#EDAE49',
                                'height': 20.8,
                                'weight': 23.8,
                            }, {
                                'colour': '#FF8C00',
                                'height': 21.5,
                                'weight': 23.0,
                            }, {
                                'colour': '#2E4052',
                                'height': 23.8,
                                'weight': 25.0,
                            }, {
                                'colour': '#D1495B',
                                'height': 18.9,
                                'weight': 20.1,
                            }, {
                                'colour': '#00798C',
                                'height': 17.7,
                                'weight': 18.8,
                            }, {
                                'colour': '#13BDD7',
                                'height': 15.2,
                                'weight': 17.4,
                            }, ]],
                        ]
                        var frameHeight = 150;
                        var yearLabel = svg.append("text")
                            .attr('x', 20)
                            .attr('y', 40)
                            .attr('font-size', 20)
                            .attr('font-family', 'Quicksand');
                        svg
                            .selectAll('circle') //select circle ( bind elements to data)
                            .data(dataset[0][1]) // bind data
                            .enter()
                            .append('circle')
                            .attr('cx', function(d) { //data = d; attr= feature
                                return x(d['height']);
                            })
                            .attr('cy', function(d) {
                                return y(d['weight']);
                                //return frameHeight - d['weight']; //x y axis at left top corner
                            })
                            .attr('r', function(d) {
                                return d['weight'] / 10; // (large gap)
                                // return Math.sqrt(d['weight']); // (small gap)
                            })
                            .attr('fill', function(d) {
                                return d.colour
                            });
                        yearLabel.text("Education");
                        var keySnapshot = 0;
                        d3.interval(function() {
                            keySnapshot = (keySnapshot + 1) % dataset.length;
                            svg
                                .selectAll('circle') //select circle ( bind elements to data)
                                .data(dataset[keySnapshot][1]) // bind data
                                .transition()
                                //.duration(2000)
                                .attr('cx', function(d) { //data = d; attr= feature
                                    return x(d['height']);
                                })
                                .attr('cy', function(d) {
                                    return y(d['weight']);
                                    //return frameHeight - d['weight']; //x y axis at left top corner
                                })
                                .attr('r', function(d) {
                                    return d['weight'] / 10; //(large gap)
                                    //return Math.sqrt(d['weight']); // (small gap)
                                })
                            yearLabel.text("" + dataset[keySnapshot][0]);
                            //.attr('fill', '#00ff00');
                        }, 1500)
                    </script>
                </div>
                <div class='col-md-5'>
                    <h3>| How to read?</h3>
                    <br>
                    <p align='left'>1. Dot close to diagonal line = more accurate</p>
                    <p align='left'>2. Dot above diagonal line = spent > expected</p>
                    <p align='left'>3. Dot below diagonal line = spent
                        < expected </p>
                            <p align='left'>4. Bigger & higher dot = larger amount of money spent</p>
                            <br>
                            <h3>| What's special?</h3>
                            <br>
                            <p align="left">| How accurate is your government?</p>
                            <p align='left'>The estimated amounts of expenditure are often not the same to the actual ones. The least accurate groups are “Health”, “Infrastructure”, “Economic” and “Housing”.</p>
                            <p align='left'>The strangest case would be "Housing" in 2016, which the government used much more than it expected.</p>
                            <br>
                            <p align="left">| Which policy area group receives most money?</p>
                            <p align='left'>Government spends the most on “Education” and “Infrastructure”, then “Social Welfare” and “Health, and the least on “Economic”, “Housing”, and “Environment and Food”.
                            </p>
                            <br>
                            <p align="left">| Overall trend?</p>
                            <p align='left'>Government spends more money on each aspect gradually. Yet, in 2016, the government seems to put less focus on "Housing" and "Economic".
                            </p>
                            <h5 align="left">"Others" is excluded due to its lack of contexts. Data are retrieved from official documents.</h5>
                </div>
            </div>
        </center>
    </div>
    <br>
    <br>


</body>

</html>
